<!DOCTYPE html>
<html lang="en">

<head>
    <title>Employ51</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Coiny" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Pacifico|VT323" rel="stylesheet">
    <!-- <link rel="stylesheet" type="text/css" href="assets/css/style.css">    -->
    <link rel="stylesheet" href="assets/css/home.css">

</head>

<body>
    <div class="wrapper">
        <div class="container-1">
            <div class="main">
                <ul class="nav">
                    <li class="nav-item">
                        <a class="nav-link" href="home.html">
                            <h1 id="title">Employ51</h1>
                        </a>
                        <h4 id="motto">Job search simplified</h4>
                    </li>
                    <li>
                        <form action="#" method="POST">
                            <input class="form-control mr-sm-2" type="search" placeholder="Job title or Keywords" id="job" aria-label="Search">
                            <input class="form-control mr-sm-2" type="location" placeholder="location" id="location" aria-label="Location">
                            <button class="btn btn-outline-success my-2 my-sm-0" id="search" type="button" data-toggle="collapse" data-target="#cardDiv" aria-expanded="false" aria-controls="cardDiv">Search</button>
                        </form>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="create.html" id="createAccount">Create account</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="login.html" id="login">Login</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="collapse" id="cardDiv">
            <div class="card">
                <h4 class="card-header" id='comp'>Company</h4>
                <div class="card-body">
                    <h4 class="card-title">Position</h4>
                    <p class="card-text" id='insert'>Job description.</p>
                    <button class="btn btn-primary" data-toggle="modal" data-target="#jobDescriptionModal" id="jobDescriptionApply">See more...</button>
                    <!-- <a href="login.html" class="btn btn-primary">Apply</a>
                    <a href="home.html" class="btn btn-secondary">Close</a> -->
                </div>
            </div>
        </div>

        <!-- <div class="push"></div> -->
        <div class="clearfix">
            <footer>
                &copy; Copyright 2017 Employ51
            </footer>
        </div>
        <div class="modal fade" id="jobDescriptionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title" id="individualJobTitle">Logo/Job title<span class="badge badge-primary">Full time</span></h3>
                    </div>
                    <div class="modal-body" id="jobDescriptionModal">
                        <p>Job description</p>
                    </div>
                    <div class="modal-footer">
                        <a href="login.html" class="btn btn-primary" id="loginHomeModal">Apply</a>
                        <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js " integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh " crossorigin="anonymous "></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js " integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ " crossorigin="anonymous "></script>
        <script src="assets/js/home.js "></script>




        <script type="text/javascript ">
            // $("#search").on("click", function() {
            //     $("#cardDiv").hide();
            // });

        var array;

        $('#search').on('click', function() {
            mySearch();
           
        
    function mySearch(search, location) {
        var sObj = {
            s: search,
            l: location
        };

        console.log('sent:');
        console.log(sObj);
        $.post("/api/search", sObj, function(data) {
            console.log('received back:');
            console.log(data);
            var myJSON = JSON.stringify(data);

            console.log('array:');
            var array = data.listings.listing;
            console.log(array);
            var r = $('#r');
            var h = '<hr>';
            for (var index = 0; index < array.length; index++) {

                var job_title = array[index].title; //VARCHAR(255) NOT NULL, // listings.listing[0].title (string)
                var job_desc = array[index].description; //LONGTEXT DEFAULT NULL, // listings.listing[0].description (string - HTML)
                var job_posted = array[index].post_date; //VARCHAR(255) DEFAULT NULL, // listings.listing[0].post_date (string - Date/Time)
                var if_remote = array[index].telecommuting; //INT DEFAULT 0, // listings.listing[0].telecommuting (int - boolean)
                var job_type_id = array[index].category.id; //VARCHAR(10), // listings.listing[0].category.id (int)
                var job_type_name = array[index].category.name; //VARCHAR(255), // listings.listing[0].category.name (string)
                var if_ft = array[index].type.id; //INT DEFAULT 1, // listings.listing[0].type.id (boolean int)
                var comp_name = array[index].company.name; //VARCHAR(255), // listings.listing[0].comp.name (string)
                var comp_url = array[index].company.url; //VARCHAR(255), // listings.listing[0].comp.url (string - HTML)
                var comp_loc = array[index].company.location.name; //VARCHAR(255), // listings.listing[0].comp.location.name
                var comp_logo = array[index].company.logo; //VARCHAR(255), // listings.listing[0].company.logo (string - HTML)
                var apply_url = array[index].apply_url; //VARCHAR(255), // listings.listing[0].apply_url (string - HTML)
                var job_url = array[index].url; //VARCHAR(255), // listings.listing[0].url (string - HTML)

                //append each of the above var's to whatever element:
                r.append(job_title).append(h);
                

            }


        }, "json");





    }
});

   
            $('#createAccount').on('click', function() {
                $('#createModal').show();
            });


            $('#closeModal').on('click', function() {
                close();
            });

            function close() {
                $('#createModal').hide();
            };
        </script>

</body>

</html>